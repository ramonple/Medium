https://selectfrom.dev/10-sql-queriesyou-should-know-as-a-data-scientist-8bf616204765

1. Select all columns

select * 
from table



2. Where Statement

Select *
from table
where xxx = 'xxx'



3. Group by and Having Clause

Select *
From table
Group By xxx
Having xxx



4. Order by and Limit

Select *
From table 
Group By xxx
Order By xxx
Limit x





5. Date Functions


Select
    date_part('year',hire_date) as year,
    date_part('month',hire_date) as month,
    date_part('day',hire_date) as day,
    date_part('dow',hire_date) as daayofweek,
    to_char(hire_date,'Dy') as day_name,
    to_char(hire_date,'Month') as month_name,
    hire_date
From table



#  TO_CHAR (datetime)

TO_CHAR (datetime) converts a datetime or interval value of DATE, TIMESTAMP, TIMESTAMP WITH TIME ZONE, or TIMESTAMP WITH LOCAL TIME ZONE datatype 
to a value of VARCHAR2 datatype in the format specified by the date format fmt. If you omit fmt, then date is converted to a VARCHAR2 value as follows:

DATE values are converted to values in the default date format.

TIMESTAMP and TIMESTAMP WITH LOCAL TIME ZONE values are converted to values in the default timestamp format.

TIMESTAMP WITH TIME ZONE values are converted to values in the default timestamp with time zone format





6. Inner, Left or Right Join


Select *
From table1
Inner/Left/Right Join table2
ON table1.xxx = table2.xxx






7. Subqueries

Select a,b, (Select c From table2)
From table1





8. Correlated Subqueries

SELECT first_name,salary,department,round((SELECT AVG(salary) 
    FROM employees e2
    WHERE e1.department = e2.department
    GROUP BY department )) as avg_salary_by_department
FROM employees e1 
WHERE salary > (SELECT AVG(salary) 
    FROM employees e2
    WHERE e1.department = e2.department
    GROUP BY department )
ORDER BY salary







9. Case When Clause

CASE
    WHEN condition1 THEN result1
    WHEN condition2 THEN result2
    WHEN conditionN THEN resultN
    ELSE result
END;


SELECT OrderID, Quantity,
CASE
    WHEN Quantity > 30 THEN 'The quantity is greater than 30'
    WHEN Quantity = 30 THEN 'The quantity is 30'
    ELSE 'The quantity is under 30'
END AS QuantityText
FROM OrderDetails;





10. Window Functions


10.1. Aggregation Examples

SELECT first_name,salary,department,
ROUND(AVG(salary) OVER(PARTITION BY department)) as avg_sales_by_dept
FROM employees
ORDER BY salary DESC




10.2.Ranking the Values

SELECT first_name,salary,RANK() OVER(ORDER BY salary DESC)
FROM employees


Row_Number, Rank, Dense_Rank
1            1        1
2            1        1
3            1        1
4            4        2
5            4        2
6            6        3



















